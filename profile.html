<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Profile | Nexus</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/profile.css">
</head>
<body>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-content">
            <a href="index.html" class="nav-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </a>
            <h1>My Profile</h1>
            <div class="nav-actions">
                <button class="nav-btn" onclick="Profile.toggleNotifications()" id="notifBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                        <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                    </svg>
                    <span class="notif-badge" id="notifBadge">3</span>
                </button>
                <button class="nav-btn" onclick="Profile.logout()" title="Logout">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Notification Dropdown -->
    <div class="notifications-panel hidden" id="notificationsPanel">
        <div class="notif-header">
            <h3>Notifications</h3>
            <button class="mark-read" onclick="Profile.markAllRead()">Mark all read</button>
        </div>
        <div class="notif-list" id="notifList"></div>
    </div>

    <main class="profile-container">

        <!-- Hero: User + Wallet Combined -->
        <section class="hero-section">
            <div class="user-identity">
                <div class="avatar-section">
                    <div class="avatar-ring">
                        <img src="" alt="Profile" id="userAvatar">
                    </div>
                    <div class="tier-flair" id="tierFlair">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                        <span id="tierText">GOLD</span>
                    </div>
                </div>
                <div class="identity-info">
                    <h2 id="userName">Loading...</h2>
                    <p class="user-contact" id="userContact">Loading...</p>
                    <div class="member-since" id="memberSince">
                        <span class="pulse-dot"></span>
                        <span id="memberSinceText">Loading...</span>
                    </div>
                </div>
            </div>

            <!-- Nexus Wallet Card -->
            <div class="wallet-card">
                <div class="wallet-bg">
                    <div class="gradient-orb orb-1"></div>
                    <div class="gradient-orb orb-2"></div>
                </div>
                <div class="wallet-content">
                    <div class="wallet-header">
                        <span class="wallet-label">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="5" width="20" height="14" rx="2"/>
                                <line x1="2" y1="10" x2="22" y2="10"/>
                            </svg>
                            Nexus Wallet
                        </span>
                        <button class="add-money-btn" onclick="Profile.showAddMoney()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Add Money
                        </button>
                    </div>
                    <div class="wallet-balance">
                        <span class="currency">‚Çπ</span>
                        <span class="amount" id="walletBalance">0</span>
                        <span class="decimal">.00</span>
                    </div>
                    <div class="wallet-quick-actions">
                        <button class="quick-action" onclick="Profile.quickAction('scan')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 7V5a2 2 0 0 1 2-2h2M17 3h2a2 2 0 0 1 2 2v2M21 17v2a2 2 0 0 1-2 2h-2M7 21H5a2 2 0 0 1-2-2v-2M8 12h8M12 8v8"/>
                            </svg>
                            Scan QR
                        </button>
                        <button class="quick-action" onclick="Profile.quickAction('transfer')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="17 1 21 5 17 9"/>
                                <path d="M3 11V9a4 4 0 0 1 4-4h14M7 23l-4-4 4-4"/>
                                <path d="M21 13v2a4 4 0 0 1-4 4H3"/>
                            </svg>
                            Transfer
                        </button>
                        <button class="quick-action" onclick="Profile.quickAction('history')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="12 8 12 12 16 14"/>
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                            History
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Nexus Club Tier Progress -->
        <section class="club-section">
            <div class="club-card">
                <div class="club-info">
                    <div class="club-title">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                        <div>
                            <h3>Nexus Club <span class="tier-name" id="clubTierName">Gold</span></h3>
                            <p id="clubSubtitle">Loading...</p>
                        </div>
                    </div>
                    <div class="tier-benefits-preview" id="tierBenefits">
                        <span class="benefit-tag">5% Cashback</span>
                        <span class="benefit-tag">Free Cancellation</span>
                        <span class="benefit-tag">Priority Support</span>
                    </div>
                </div>
                <div class="tier-progress-container">
                    <div class="tier-markers">
                        <div class="marker" id="markerSilver">
                            <div class="marker-dot"></div>
                            <span>Silver</span>
                        </div>
                        <div class="marker current" id="markerGold">
                            <div class="marker-dot"></div>
                            <span>Gold</span>
                        </div>
                        <div class="marker" id="markerPlatinum">
                            <div class="marker-dot"></div>
                            <span>Platinum</span>
                        </div>
                        <div class="marker" id="markerElite">
                            <div class="marker-dot"></div>
                            <span>Elite</span>
                        </div>
                    </div>
                    <div class="progress-track">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="pointsEarned">0 points earned</span>
                        <span class="next-tier" id="nextTierText">Loading...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Stats Grid -->
        <section class="stats-section">
            <div class="stat-card primary">
                <div class="stat-visual">
                    <svg viewBox="0 0 36 36" class="circular-chart">
                        <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                        <path class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                    </svg>
                    <div class="stat-icon">üí∞</div>
                </div>
                <div class="stat-details">
                    <span class="stat-value" id="totalSavings">‚Çπ0</span>
                    <span class="stat-label">Total Savings</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-visual blue">
                    <div class="stat-icon">üé´</div>
                </div>
                <div class="stat-details">
                    <span class="stat-value" id="ticketsBooked">0</span>
                    <span class="stat-label">Tickets Booked</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-visual orange">
                    <div class="stat-icon">üîÑ</div>
                </div>
                <div class="stat-details">
                    <span class="stat-value" id="resaleDeals">0</span>
                    <span class="stat-label">Resale Deals</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-visual pink">
                    <div class="stat-icon">‚≠ê</div>
                </div>
                <div class="stat-details">
                    <span class="stat-value" id="nexusPoints">0</span>
                    <span class="stat-label">Points Balance</span>
                </div>
            </div>
        </section>

        <!-- Main Content Tabs -->
        <section class="content-section">
            <div class="tab-navigation">
                <button class="tab-pill active" data-tab="dashboard" onclick="Profile.switchTab('dashboard')">
                    Dashboard
                </button>
                <button class="tab-pill" data-tab="tickets" onclick="Profile.switchTab('tickets')">
                    My Tickets
                </button>
                <button class="tab-pill" data-tab="insights" onclick="Profile.switchTab('insights')">
                    Insights
                </button>
                <button class="tab-pill" data-tab="wishlist" onclick="Profile.switchTab('wishlist')">
                    Wishlist
                </button>
            </div>

            <!-- Dashboard Tab -->
            <div class="tab-pane active" id="dashboardTab">
                
                <!-- Recent Activity -->
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>Recent Activity</h3>
                        <button class="view-all" onclick="Profile.switchTab('tickets')">View All</button>
                    </div>
                    <div class="activity-list" id="recentActivity">
                        <div class="loading-state">Loading activity...</div>
                    </div>
                </div>

                <!-- Referral Card -->
                <div class="referral-card">
                    <div class="referral-content">
                        <div class="referral-text">
                            <h3>Invite Friends, Earn ‚Çπ100</h3>
                            <p>Get ‚Çπ100 in wallet + 500 points for every friend who joins</p>
                        </div>
                        <div class="referral-code">
                            <span class="code-text" id="referralCode">LOADING</span>
                            <button class="copy-btn" onclick="Profile.copyReferral()">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                </svg>
                                Copy
                            </button>
                        </div>
                    </div>
                    <div class="referral-stats">
                        <div class="ref-stat">
                            <span class="ref-number" id="refInvited">0</span>
                            <span class="ref-label">Invited</span>
                        </div>
                        <div class="ref-stat">
                            <span class="ref-number" id="refJoined">0</span>
                            <span class="ref-label">Joined</span>
                        </div>
                        <div class="ref-stat highlight">
                            <span class="ref-number" id="refEarned">‚Çπ0</span>
                            <span class="ref-label">Earned</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Book -->
                <div class="quick-book-section">
                    <h3>Quick Book</h3>
                    <div class="quick-grid">
                        <a href="bus.html" class="quick-item">
                            <div class="quick-icon bus">üöå</div>
                            <span>Bus</span>
                        </a>
                        <a href="flight.html" class="quick-item">
                            <div class="quick-icon flight">‚úàÔ∏è</div>
                            <span>Flight</span>
                        </a>
                        <a href="movies.html" class="quick-item">
                            <div class="quick-icon movie">üé¨</div>
                            <span>Movie</span>
                        </a>
                        <a href="concerts.html" class="quick-item">
                            <div class="quick-icon concert">üéµ</div>
                            <span>Event</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Tickets Tab -->
            <div class="tab-pane" id="ticketsTab">
                <div class="filter-chips">
                    <button class="chip active" onclick="Profile.filterTickets('all')">All Tickets</button>
                    <button class="chip" onclick="Profile.filterTickets('active')">Active</button>
                    <button class="chip" onclick="Profile.filterTickets('past')">Past</button>
                    <button class="chip" onclick="Profile.filterTickets('resale')">Listed</button>
                </div>
                <div class="tickets-grid" id="ticketsGrid">
                    <div class="loading-state">Loading tickets...</div>
                </div>
            </div>

            <!-- Insights Tab -->
            <div class="tab-pane" id="insightsTab">
                <div class="insights-header">
                    <div class="insight-card total-spent">
                        <span class="insight-label">Total Spent (2024)</span>
                        <span class="insight-value" id="totalSpent">‚Çπ0</span>
                        <span class="insight-change positive" id="spentChange">‚Üë 0% vs last year</span>
                    </div>
                </div>

                <div class="category-breakdown">
                    <h4>Spending by Category</h4>
                    <div class="category-bars" id="categoryBars">
                        <div class="loading-state">Loading insights...</div>
                    </div>
                </div>

                <div class="monthly-chart">
                    <h4>Monthly Trend</h4>
                    <div class="chart-container">
                        <div class="chart-bars" id="monthlyBars"></div>
                        <div class="chart-labels">
                            <span>Jan</span><span>Feb</span><span>Mar</span><span>Apr</span><span>May</span><span>Jun</span>
                        </div>
                    </div>
                </div>

                <div class="achievements">
                    <h4>Achievements</h4>
                    <div class="badge-grid" id="badgeGrid">
                        <div class="loading-state">Loading achievements...</div>
                    </div>
                </div>
            </div>

            <!-- Wishlist Tab -->
            <div class="tab-pane" id="wishlistTab">
                <div class="wishlist-header">
                    <p>Saved events with price drop alerts</p>
                </div>
                <div class="wishlist-grid" id="wishlistGrid">
                    <div class="loading-state">Loading wishlist...</div>
                </div>
            </div>

        </section>
    </main>

    <!-- Add Money Modal -->
    <div class="modal hidden" id="addMoneyModal">
        <div class="modal-overlay" onclick="Profile.closeModal()"></div>
        <div class="modal-sheet">
            <div class="sheet-header">
                <h3>Add Money to Wallet</h3>
                <button class="close-btn" onclick="Profile.closeModal()">√ó</button>
            </div>
            <div class="amount-presets">
                <button class="preset-btn" onclick="Profile.selectAmount(500)">‚Çπ500</button>
                <button class="preset-btn" onclick="Profile.selectAmount(1000)">‚Çπ1000</button>
                <button class="preset-btn active" onclick="Profile.selectAmount(2000)">‚Çπ2000</button>
                <button class="preset-btn" onclick="Profile.selectAmount(5000)">‚Çπ5000</button>
            </div>
            <div class="custom-amount">
                <span class="currency-symbol">‚Çπ</span>
                <input type="number" id="customAmount" placeholder="Enter amount" value="2000">
            </div>
            <div class="payment-methods">
                <label class="payment-option">
                    <input type="radio" name="payment" value="upi" checked>
                    <div class="option-content">
                        <span class="option-icon">üè¶</span>
                        <div class="option-details">
                            <span class="option-title">UPI</span>
                            <span class="option-sub" id="upiId">Loading...</span>
                        </div>
                    </div>
                </label>
                <label class="payment-option">
                    <input type="radio" name="payment" value="card">
                    <div class="option-content">
                        <span class="option-icon">üí≥</span>
                        <div class="option-details">
                            <span class="option-title">Card</span>
                            <span class="option-sub">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242</span>
                        </div>
                    </div>
                </label>
            </div>
            <button class="confirm-btn" id="confirmAddMoneyBtn" onclick="Profile.confirmAddMoney()">
                Add ‚Çπ2,000
            </button>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script src="js/profile.js"></script>
</body>
</html>